"0","model_str <- """
"0","    data {"
"0","        int D;"
"0","        int<lower=0,upper=1> X1[D];"
"0","        int<lower=0,upper=1> X2[D];"
"0","        int<lower=0,upper=1> X3[D];"
"0","        int<lower=0,upper=1> X4[D];"
"0","        int<lower=0,upper=1> X5[D];"
"0","        int<lower=0,upper=1> M[D];"
"0","        int<lower=0,upper=1> Y[D];"
"0","    }"
"0","  parameters {"
"0","       real<lower=0> u1_scale;"
"0","       real<lower=0> mu1;"
"0","       real<lower=0> u2_scale;"
"0","       real mu2;"
"0","       real<lower=0> u3_scale;"
"0","       real mu3;"
"0","       real theta_zero_X1; "
"0","       real theta_U1X1;"
"0","       real theta_U2X1;"
"0","       real theta_U3X1;"
"0","       "
"0","       real theta_zero_X2; "
"0","       real theta_U1X2;"
"0","       real theta_U2X2;"
"0","       real theta_U3X2;"
"0","       "
"0","       real theta_zero_X3; "
"0","       real theta_U1X3;"
"0","       real theta_U2X3;"
"0","       real theta_U3X3;"
"0","       "
"0","       real theta_zero_X4; "
"0","       real theta_U1X4;"
"0","       real theta_U2X4;"
"0","       real theta_U3X4;"
"0","       "
"0","       real theta_zero_X5; "
"0","       real theta_U1X5;"
"0","       real theta_U2X5;"
"0","       real theta_U3X5;"
"0","       "
"0","       real theta_zero_M; "
"0","       real theta_X1M;"
"0","       real theta_X2M; "
"0","       real theta_X3M;"
"0","       real theta_X4M;"
"0","       real theta_X5M;"
"0","       real theta_zero_Y;"
"0","       real theta_MY;"
"0","       real theta_U1Y;"
"0","       real theta_U2Y;"
"0","       real theta_U3Y;"
"0","       vector[D] U1;"
"0","       vector[D] U2;"
"0","       vector[D] U3;"
"0","  }"
"0","    model {"
"0","        //prior over parameters"
"0","        u1_scale  ~ normal(0, 10); "
"0","        u2_scale  ~ normal(0, 10); "
"0","        u3_scale  ~ normal(0, 10); "
"0","        mu1  ~ normal(0, 10); "
"0","        mu2  ~ normal(0, 10); "
"0","        mu3 ~ normal(0, 10);"
"0","        theta_zero_X1  ~ normal(0, 10); "
"0","        theta_U1X1 ~ normal(0, 10); "
"0","        theta_U2X1 ~ normal(0, 10); "
"0","        theta_U3X1 ~ normal(0, 10);"
"0","        "
"0","        theta_zero_X2  ~ normal(0, 10); "
"0","        theta_U1X2 ~ normal(0, 10); "
"0","        theta_U2X2 ~ normal(0, 10); "
"0","        theta_U3X2 ~ normal(0, 10); "
"0","        "
"0","        theta_zero_X3  ~ normal(0, 10); "
"0","        theta_U1X3 ~ normal(0, 10); "
"0","        theta_U2X3 ~ normal(0, 10); "
"0","        theta_U3X3 ~ normal(0, 10); "
"0","        "
"0","        theta_zero_X4  ~ normal(0, 10); "
"0","        theta_U1X4 ~ normal(0, 10); "
"0","        theta_U2X4 ~ normal(0, 10); "
"0","        theta_U3X4 ~ normal(0, 10); "
"0","        "
"0","        theta_zero_X5  ~ normal(0, 10); "
"0","        theta_U1X5 ~ normal(0, 10); "
"0","        theta_U2X5 ~ normal(0, 10); "
"0","        theta_U3X5 ~ normal(0, 10); "
"0","        "
"0","        theta_zero_M ~ normal(0, 10); "
"0","        theta_X1M ~ normal(0, 10); "
"0","        theta_X2M ~ normal(0, 10); "
"0","        theta_X3M ~ normal(0, 10); "
"0","        theta_X4M ~ normal(0, 10); "
"0","        theta_X5M ~ normal(0, 10); "
"0","        "
"0","        theta_zero_Y ~ normal(0, 10); "
"0","        theta_MY ~ normal(0, 10); "
"0","        theta_U1Y ~ normal(0, 10); "
"0","        theta_U2Y ~ normal(0, 10); "
"0","        theta_U3Y ~ normal(0, 10);"
"0","        //likelihood"
"0","        U1 ~ normal(mu1, u1_scale); "
"0","        U2 ~ normal(mu2, u2_scale);"
"0","        U3 ~ normal(mu3, u3_scale);"
"0","        X1 ~ bernoulli_logit(theta_zero_X1 + theta_U1X1 * U1 + theta_U2X1 * U2 + theta_U3X1 * U3); "
"0","        X2 ~ bernoulli_logit(theta_zero_X2 + theta_U1X2 * U1 + theta_U2X2 * U2 + theta_U3X2 * U3); "
"0","        X3 ~ bernoulli_logit(theta_zero_X3 + theta_U1X3 * U1 + theta_U2X3 * U2 + theta_U3X3 * U3); "
"0","        X4 ~ bernoulli_logit(theta_zero_X4 + theta_U1X4 * U1 + theta_U2X4 * U2 + theta_U3X4 * U3); "
"0","        X5 ~ bernoulli_logit(theta_zero_X5 + theta_U1X5 * U1 + theta_U2X5 * U2 + theta_U3X5 * U3); "
"0","        for(i in 1:D) {"
"0","            M[i] ~ bernoulli_logit(theta_zero_M + theta_X1M * X1[i] + theta_X2M * X2[i] + theta_X3M * X3[i] + theta_X4M * X4[i] + theta_X5M * X5[i]);  "
"0","            Y[i] ~ bernoulli_logit(theta_zero_Y + theta_MY * M[i] + theta_U1Y * U1[i] + theta_U2Y * U2[i] + theta_U3Y * U3[i]); "
"0","        }"
"0","    }"
"0",""""
